on:
  pull_request:
    branches:
    - main
    - master
  push:
    branches:
    - main
    - master
    - develop
name: "Build & Release"
jobs:
 build:
   runs-on: windows-latest
   steps:
- uses: actions/checkout@v3
- uses: actions/setup-java@v2
  with:
    java-version: '11'
- uses: subosito/flutter-action@v2
  with:
    flutter-version: '3.0.5'
- run: flutter pub get
- run: flutter test
- run: flutter build apk
- run: flutter build appbundle
- name: Push to Releases
  uses: ncipollo/release-action@v1
  with:
    artifacts: "build/app/outputs/apk/debug/*"
    tag: v1.0${{ github.run_number }}
    token: ${{ secrets.TOKEN }}
